<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/sl-gallery/sl-gallery.html">
<link rel="import" href="shared-styles.html">

<dom-module id="nanco-view-gallery">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

      h2 {
        padding: 16px 0;
        margin: 0;
        color: #333;
      }

      h2:first-of-type {
        padding-top: 0;
      }

      h2:not(:first-of-type) {
        margin-top: 32px;
        border-top: 1px dotted #999;
      }
    </style>

    <div class="sub-container">
      <h2>Tweakers</h2>
      <sl-gallery prefix="tweakers"></sl-gallery>

      <h2>Tweakers Achmea</h2>
      <sl-gallery prefix="tweakers-achmea"></sl-gallery>

      <h2>Tweakers Passen</h2>
      <sl-gallery prefix="tweakers-passen"></sl-gallery>

      <h2>Tweakers Flyer</h2>
      <sl-gallery prefix="tweakers-flyer"></sl-gallery>

      <h2>Tweakers DS</h2>
      <sl-gallery prefix="tweakers-ds"></sl-gallery>

      <h2>Tweakers Meet-up</h2>
      <sl-gallery prefix="tweakers-meet-up"></sl-gallery>

      <h2>Blue Monday</h2>
      <sl-gallery prefix="blue-monday"></sl-gallery>

      <h2>Mission 1337</h2>
      <sl-gallery prefix="mission-1337"></sl-gallery>
    </div>
  </template>

  <script>
    class NancoViewGallery extends Polymer.Element {

      static get is() { return 'nanco-view-gallery'; }

      ready() {
        super.ready();

        fetch('/images/gallery/tweakers.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('tweakers', images);
          });

        fetch('/images/gallery/tweakers-achmea.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('tweakers-achmea', images);
          });

        fetch('/images/gallery/tweakers-passen.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('tweakers-passen', images);
          });

        fetch('/images/gallery/tweakers-flyer.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('tweakers-flyer', images);
          });

        fetch('/images/gallery/tweakers-ds.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('tweakers-ds', images);
          });

        fetch('/images/gallery/tweakers-meet-up.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('tweakers-meet-up', images);
          });

        fetch('/images/gallery/blue-monday.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('blue-monday', images);
          });

        fetch('/images/gallery/mission-1337.json')
          .then(data => data.json())
          .then(images => {
            this._createImages('mission-1337', images);
          });
      }

      _createImages(prefix, images) {
        const gallery = this.shadowRoot.querySelector(`sl-gallery[prefix="${prefix}"]`);
        images.forEach(img => {
          const el = document.createElement('sl-gallery-image');
          el.src = img.src || '';
          el.small = img.small || '';
          el.title = img.title || '';
          el.caption = img.caption || '';
          gallery.appendChild(el);
        });
      }

    }

    window.customElements.define(NancoViewGallery.is, NancoViewGallery);
  </script>
</dom-module>
